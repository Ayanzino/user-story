(this["webpackJsonpeos-issue-request"]=this["webpackJsonpeos-issue-request"]||[]).push([[0],{102:function(e,t,a){e.exports=a.p+"static/media/user-story-logo.ed111364.svg"},103:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAfCAYAAACvUTALAAAABHNCSVQICAgIfAhkiAAACMhJREFUaEO1mW2IXOUVx89zX3aTreKCbQwaNUtMRNqG8S0EVpsJ0mD7QSMt4ofgTFpaKggaUFHUErFdP4jSUBD94j4gSL9Y9otLizTZ1EpbrLirWItBXVpsRdHkatxNmH3OkfO83PvcO/feuTPZLiyTnUzOzvOb//M//3MiYMQvemJDF0SwRzy4cnDEEqX/jH6xoQsU7BHPrW/d1d2buwjhnm/87aOR368Y5aAW1CwQACBI8fD6HMyCmgVl6z6/PnUNqHhWYQSkInnBGydGAjY0rBQUAmhYDtgvz+1gGhQGs8B1+dsBe+Hc6jIoBWOzqEJAikCpCIgi+c3Ft4cGNhSsHCiWZBHY4dEOVgqKPwQGpkCK341W14Aan1UqZEAOFPDPgJG86J3XhwLWGJYGBYG5ekZN5st/5Cv5+HAH06CUpyhfWT6wl4are3r3JV2iyCoqBqcsRKMw/pkolFv+9VpjYI1gNQLlADKwmWYH6wPFSnKA3KODx3XnmtU1oOIUlFNWHlQECkMAFcrL3/9TI2ADYaWgfAU5dfkqc1fS+I0UT9YfjH5mlWq8KfuuA8Z15+vralA4NssgECPQgDDWj/oq8qN7nhWmfw7lFcsvDwRWC2sgKB+QrwhzeCmeLj9YI1BVABnYK+V1GRTi+KwB5EBZIJWgYqMwCuWV/3mpFlglLA2KPI8qepWCBIAWQIlbUw8rAiOQ4kj+YBoU1/UVlAeTANm6FcBQgQwX8nVPX3+pjQesFAPAV5JSQUIULSBGt6bPW+/SHmYV9p2PX6wEVgqrESjVa4uZ3iI9uHEOyAJzAPxDIjwmnlk5zL0gByr/GhcXEljrtcVcb5FumZCA0EljhP0gCAOnGjn26mf6YF9et6VNYvyYuXrelbNdkEGAiq7ecmJh8cNt+6TCqMPAfNM33dKYfuvT50uB9cFKQZV1O/OGE0AL6v64BRAfA4DJnO84s1ewBKsrbSHhlAbFOapKUQgpKBeU6eYJCZQBIwr1gUw302qQLpF/dvUOCRB3Ks1cBXLq/aMawnuX3SKRQg3Mfz3XN94Wyms/f7YPWA7W/w3UT/RoVH/1WKmsqB/GLRBRR7y8ekir8fsTEhR0XLtPQaUHjeUFr5tE/sl3d0qCuON7Vt7UA3nF8rx+7bsX3y6VBWYBOVCAGHATkLu+OJIDlsKiX9sD+UHT73pliiKrqH5zzxTFoDifleUn81wCPihWKsKk7qjWyFX7fKlUnCrBB2auUpwm8v9etUsDK+96rKRAXvXR7zWEtzbdKZGCjqeoHDDESE6vPJkC07AGglqDBMi7euRdvSagquNAOSgLFtcyI1+d3iQJI6uwyI4umYlzXrronTf0wf6940ZJNGYUlpq3jQ36CgfSGfmbF/5UIrGH8RUMdFMwj+ZKAgXyhjMzuq7QoKqSufOoMlC+mWcBcgnOWI9iRXHXKxp5Bs54n7t6/AGwUm3uIhTarBUGcvzVz/WbPb3rMqko6phY4L7dKJNP5B9M7ZMEkVFYiZkjCtn6VOq6/5i8qwaYBifbvcMHBf1qQgJAp2+ESRM5zYmZ1du0Au/f+BtAcU86E+ZBVIMqNXWaE3O27g+8ugjWM2z7x3Bp/KuzbbF46tQX12/rKuQRxiirNJFTKC8/YRI5GzkDK3Y9Tzmpkf/9/EP2SvrKCgAgBIUiEWtxy1zDx22bbpDI6ZDX0v2ud7agqLpknvlXmsjpJtP5fHNWGC9tXFnVoE5es61LEOvAWexi2aznEjoncmPk/7z4x8bD0hiRv2rsYbu//K1+7V8mHpCEpksSCSAIAZVIhArbe+HhxczgD3tt2k/m/mxmEzndbdVoRpsl8EH5a5ZqU8/WMBxc/2gCJhs5ojFn1KBWLKjtXYIol8yrRxc78+lE7oz8gO2SmRf5pq6UkNMrT+n38OexRyRB2CEI2NsSoQINSnuWv/yjR0qA5b0pTeR0l1ZYKwXV9Wa9/iHYrFuqn5fiqAG2Ov0tiRS3Jgqg7B4qN9sNAsYzn2/k+kp65p0DhoH8njXyY/FjEjHYH3ig+mDpK/mQdyXLTVyKZ8zBqAuTOnD6oMpHlAQULeik7xZ7uUSuZ7k0kVNrctJcve16e5AfXUxCN4u8MAGKFhSGeoQp5isGw3VdImcjN8B0MyjpfoE2cj7bMXhi6154aNkXU/m4c59VWP+s5xQi3Y5cgxo06/V6bTHfW6xK5M6D+GAukZ9sbe+iGEsXd0UzX1OhviJTy68s+ok8b+b9ifyv5927ABDu8YGxiTNYgAAUiSM3rT16rw/J/bl6kHZGnu2pss2oXcMA4vGmoNIRxiZyM7rYrmaCpZ3VQom94DiKbMNZDkpoUK7uu5fcLpU151LlYCCVCo+DYO/LTN6AYgym6wVKpB5VBFa/omEj59msCKx8CC56UgJWUcVfqhM5D7NuO4DGlN0QnK5X0o1mFijVWpgIzINy9d/afECiMgHTfZcFzcyrGFoAxsxFEmA1qFLPKh7MGnk5sLo1C28P5nvpJ1+se3Z6kwaWzXyF1a/dRxXXLFWgXH2TyF37L+9+zuT9eBBg3N4LD1S+30awtJH/3AyzNd3M/W+MmfUGgHIHyyfy+o0m76P4QFPL87UHyhK5AdavLBM0kQQv/PTVCxuAagxLAzvohdG6obghKAfs5LU7JLLCala/BlTUCJSrmyXy1ORTE0cKeObjUSoJMRqoqIEGX9YN6EANMB62edaruXplNfm5T3bu1MDS9p/zquFBud/DiRz0lbQxAXiLapM5igQxau8bcPUGRoeqQ2mF3VFyJd36ZgRQ7nf979u7jML6QIVDKar43v1EzltWbeZaUTzC1HvUUN2wChr9yAPm1jfnAMr9Hl6tmHWJXqMkisL2jgYeVffh8t9xIgfeW9kRBikcSlEjXUP/TekduYL9es+1DqBcbd6R86ihKFgXUK7u0XBGIor9o4IayuBLPezmDVvFH87kRoJBn3KTv/9w8/6tUx/PrXvdshGmyftxr/kannA6DfgyXbIAAAAASUVORK5CYII="},113:function(e){e.exports=JSON.parse('{"authentication":{"title-sign-in":"Registrarse","title-sign-up":"Reg\xedstrate","login-label":"Iniciar sesi\xf3n","register-label":"Registrarse","submit-label":"Enviar","header-left":"Historias de usuarios","user-stories-description":"Comparta con nosotros c\xf3mo usa nuestros productos, se relaciona con las historias de otros usuarios, vote por ellos y nos aseguraremos de brindar soluciones coherentes que mejoren su experiencia.","footer-left":"Este sitio guarda cierta informaci\xf3n en cookies pero solo cuando es estrictamente necesario","username-label":"Ingrese su nombre de usuario","email-label":"Introduce tu correo electr\xf3nico","password-label":"Ingresa tu contrase\xf1a","confirm-password-label":"Confirmar contrase\xf1a","forgot-password":"\xbfSe te olvid\xf3 tu contrase\xf1a?","reset-password":"Configura tu nueva contrase\xf1a","old-password":"Ingrese su contrase\xf1a anterior","new-password":"Nueva contrase\xf1a","confirm-password":"Confirmar contrase\xf1a","create-account":"Crea una cuenta","footer-right":"2020 EOS","existing-user":"\xbfUsuario existente?","reset-password-done":"Ll\xe9vame a la p\xe1gina de inicio de sesi\xf3n","success":"\xc9xito"}}')},114:function(e){e.exports=JSON.parse('{"authentication":{"title-sign-in":"Sign in","title-sign-up":"Sign up","login-label":"Login","register-label":"Register","submit-label":"Submit","header-left":"User Story","user-stories-description":"Share with us how you use our products, relate to other users\' stories, vote them up, and we\'ll make sure we deliver cohesive solutions that enhance your experience.","footer-left":"This site saves some information in cookies but only when strictly necessary","username-label":"Enter your username","email-label":"Enter your email","password-label":"Enter your password","confirm-password-label":"Confirm password","forgot-password":"Forgot password?","reset-password":"Set your new password","old-password":"Enter your old password","new-password":"New password","confirm-password":"Confirm password","create-account":"Create an account","footer-right":"2020 EOS","existing-user":"Existing user?","reset-password-done":"Take me to the sign-in page","success":"Success"}}')},117:function(e,t,a){e.exports=a(292)},127:function(e,t,a){},15:function(e){e.exports=JSON.parse('{"b":"https://us-strapi.eosdesignsystem.com","a":"dev"}')},151:function(e,t,a){e.exports=a.p+"static/media/loading.641bf49c.svg"},152:function(e,t,a){e.exports=a.p+"static/media/user-story-graphic.b152d872.svg"},213:function(e,t,a){e.exports=a.p+"static/media/story-page-pattern.fa56c7eb.svg"},292:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(43),s=a.n(c),l=a(116),o=a(3),i=a(6),u=(a(127),a(1)),m=a.n(u),d=a(4),p=a(9),f=a(8),E=a(12),v=a(32),h=function(e){var t=e.children,a=e.className,n=e.action,c=e.type,s=e.onClick,l=e.disabled,o=Object(v.a)(e,["children","className","action","type","onClick","disabled"]);return r.a.createElement("button",Object.assign({className:a,action:n,type:c,onClick:s,disabled:l},o),t)},b=a(5),g=function(e){var t=e.isActive,a=e.children,n=e.cancelText,c=e.okText,s=e.onCancel,l=e.onOk,o=e.showButtons,i=e.active;return r.a.createElement(r.a.Fragment,null," ",t?r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-card"},r.a.createElement("div",{className:"flex flex-row modal-content"},a),o&&r.a.createElement("div",{className:"flex flex-row flex-space-around"},r.a.createElement(h,{className:"btn btn-default",onClick:s},n||"Cancel"),r.a.createElement(h,{className:"btn btn-default",onClick:l},c||"Accept")))):"",i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-card-vote"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("span",{className:"close-icon",onClick:e.handleClose},"\xd7"),e.content)))):"")},y=a(10),w=a(13),N=a.n(w),O=a(15),j={baseURL:O.b,withCredentials:!0},x=N.a.create(j);x.interceptors.response.use((function(e){return"prod"!==O.a&&console.log("RESPONSE: ",e),e}),(function(e){if(e.response)return console.log("RESPONSE_ERROR: ",e.response),Promise.reject(e.response);e.request?console.log("NO_RESPONSE: ",e.request):console.log("REQUEST_ERROR: ",e.message)}));var k=function(e,t){return x.request(Object(y.a)({url:e,method:"post",data:t},j))},S="fragment BasicStoryInfo on UserStory {\n  id\n  Title\n  Description\n  followers {\n    id\n    username\n  }\n}",C="fragment NotificationData on UserStoryNotification {\n  message\n  id\n  users {\n    id\n  }\n  seenBy {\n    id\n  }\n  date\n  link\n}",A={createStory:function(e){return k("/user-stories",e)},checkAuthor:function(e,t){return k("/checkAuthor",{id:e,storyId:t})},getStoriesByTitle:function(e){var t={query:'query {\n        userStories(sort: "votes:desc,createdAt:desc", where: {\n          Title_contains: "'.concat(e,'"\n        }) {\n          ...BasicStoryInfo\n        }\n      }\n      ').concat(S,"\n      ")};return k("/graphql",t)},getStories:function(e,t,a,n,r,c,s,l){a=a?'id: "'.concat(a,'"'):"",l=l?'followers: "'.concat(l,'"'):"";var o={query:'query {\n              userStories(sort: "createdAt:desc", limit: 5, start: '.concat(5*(e-1),', where: {\n                  user_story_status : {\n                    Status: "').concat(t,'"\n                  },\n                  author: {\n                    ').concat(a,'\n                    username_contains: "').concat(n,'"\n                  }\n                  ').concat(r,"\n                  ").concat(c,"\n                  ").concat(s,"\n                  ").concat(l,"\n              }) {\n                id\n                Title\n                Description\n                user_story_status {\n                  Status\n                }\n                user_story_comments {\n                  Comments\n                }\n                product {\n                  Name\n                }\n                Attachment {\n                  id\n                  url\n                }\n                author {\n                  id\n                  username\n                  profilePicture {\n                    id\n                    url\n                  }\n                }\n                followers {\n                  id\n                  username\n                }\n                Category\n              }\n            }\n            ")};return k("/graphql",o)},getStory:function(e){var t={query:'query {\n        userStory(id: "'.concat(e,'") {\n          ...BasicStoryInfo\n          user_story_status {\n            Status\n          }\n          user_story_comments {\n            Comments\n          }\n          author {\n            id\n            username\n          }\n          Attachment {\n            id\n            url\n          }\n        }\n      }\n      ').concat(S,"\n      ")};return k("/graphql",t)},getStoryCount:function(e,t,a,n,r,c,s){t=t?'id: "'.concat(t,'"'):"",s=s?'followers: "'.concat(s,'"'):"";var l={query:'query {\n              userStoriesConnection(where: {\n                user_story_status: {\n                  Status: "'.concat(e,'"\n                },\n                author: {\n                  ').concat(t,'\n                  username_contains: "').concat(a,'"\n                }\n                ').concat(n,"\n                ").concat(r,"\n                ").concat(c,"\n                ").concat(s,"\n              }) {\n                aggregate {\n                  count\n                }\n              }\n            }")};return k("/graphql",l)},updateUserStoryDescription:function(e,t){var a={query:'mutation {\n        updateUserStory(\n          input: { where: { id: "'.concat(e,'" }, data: { Description: "').concat(t,'" } }\n        ) {\n          userStory {\n            updatedAt\n          }\n        }\n      }')};return k("/graphql",a)},getCategories:function(){return k("/graphql",{query:'{ __type(name: "ENUM_USERSTORY_CATEGORY") {enumValues {name}}}'})},getPolicies:function(){return k("/graphql",{query:"query {\n        userStoryPolicies {\n          Description\n        }\n      }"})},getPriorities:function(){return k("/graphql",{query:'query { __type(name: "ENUM_USERSTORY_PRIORITY") {enumValues {name}}}'})},getProducts:function(){return k("/graphql",{query:"query {\n              products {\n                Name\n                logo {\n                  url\n                }\n              }\n            }"})},getProductCount:function(){return k("/graphql",{query:"query {\n        productsConnection {\n          aggregate {\n            count\n          }\n        }\n      }"})},getProductsWithTemplates:function(){return k("/graphql",{query:"query {\n              products {\n                id\n                Name\n                product_template\n              }\n            }"})},getNotificationsByUserId:function(e){var t={query:'query {\n        userStoryNotifications (where: {\n          users: {\n            id: "'.concat(e,'"\n          }\n        }){\n          ...NotificationData\n        }\n      }\n      ').concat(C,"\n      ")};return k("/graphql",t)},getPolicyNotifications:function(){var e={query:'query {\n            userStoryNotifications(where: {message: "User story privacy policy has been updated"}) {\n              ...NotificationData\n            }\n          }\n          '.concat(C,"\n          ")};return k("/graphql",e)},markNotificationAsRead:function(e,t){var a={query:'mutation updateNotifications($seenBy: [ID]) {\n        updateUserStoryNotification(input: {\n          where: {\n            id: "'.concat(e,'"\n          }\n          data: {\n            seenBy: $seenBy\n          }\n        }) {\n          userStoryNotification {\n            id\n          }\n        }\n      }'),variables:{seenBy:t}};return k("/graphql",a)},getUserDetails:function(e){var t={query:'query {\n        user(id: "'.concat(e,'") {\n          profilePicture {\n            id\n            url\n          }\n          Name\n          Bio\n          username\n          Company\n          Profession\n          email\n          LinkedIn\n          Twitter\n        }\n      }\n      ')};return k("/graphql",t)},updateUser:function(e){var t,a,n,r,c,s,l={query:'mutation {\n        updateUser(input: {\n          where: {\n            id: "'.concat(e.id,'"\n          }\n          data: {\n            Name: "').concat(null!==(t=e.Name)&&void 0!==t?t:e.username,'"\n            Profession: "').concat(null!==(a=e.Profession)&&void 0!==a?a:"",'"\n            Company: "').concat(null!==(n=e.Company)&&void 0!==n?n:"",'"\n            LinkedIn: "').concat(null!==(r=e.LinkedIn)&&void 0!==r?r:"",'"\n            Twitter: "').concat(null!==(c=e.Twitter)&&void 0!==c?c:"",'"\n            Bio: "').concat(null!==(s=e.Bio)&&void 0!==s?s:"",'"\n          }\n        }) {\n          user {\n            username\n          }\n        }\n      }')};return k("/graphql",l)},getUsers:function(){return k("/graphql",{query:"\n      query {\n        users {\n          id\n          display: username\n        }\n      }"})},getComments:function(e){var t={query:'\n      query {\n        userStory(id: "'.concat(e,'") {\n          user_story_comments {\n            id\n            Comments\n            user {\n              id\n              username\n            }\n            createdAt\n            attachment {\n              url\n              id\n            }\n            user_story_comment_replies {\n              createdAt\n              Comments\n              user {\n                id\n                username\n              }\n              attachment {\n                id\n                url\n              }\n            }\n          }\n        }\n       }')};return k("/graphql",t)},postComment:function(e){return k("/user-story-comments",e)},postCommentReply:function(e){return k("/user-story-comment-threads",e)},updateVotes:function(e,t){var a={query:'\n      mutation {\n        updateUserStory(input: {where: {id: "'.concat(e,'"} data: {followers: [').concat(t,"]}}){\n          userStory{\n            followers {\n              id\n            }\n          }\n        }\n      }\n      ")};return k("/graphql",a)}},P=function(e){var t=e.story,a=localStorage.getItem("id"),c=t.followers.map((function(e){return JSON.stringify(e.id)})),s=Object(n.useState)(c),l=Object(o.a)(s,2),u=l[0],p=l[1],f=Object(n.useState)(t.followers.length),E=Object(o.a)(f,2),v=E[0],h=E[1],y=Object(n.useState)(!1),w=Object(o.a)(y,2),N=w[0],O=w[1],j=Object(n.useState)(!1),x=Object(o.a)(j,2),k=x[0],S=x[1],C=Object(n.useState)(!1),P=Object(o.a)(C,2),U=P[0],T=P[1],R=function(){T(!U)};Object(n.useEffect)((function(){t.followers.map((function(e){return e.id})).includes(a)&&S(!0)}),[t.followers,a]);var I=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(!0),!k){e.next=12;break}return n=u.filter((function(e){return e!==JSON.stringify(a)})),e.next=5,A.updateVotes(t.id,n);case 5:r=e.sent,n=r.data.data.updateUserStory.userStory.followers.map((function(e){return JSON.stringify(e.id)})),p(n),S(!1),h((function(e){return e-1})),e.next=21;break;case 12:return u.push(JSON.stringify(a)),c=u,e.next=16,A.updateVotes(t.id,c);case 16:s=e.sent,c=s.data.data.updateUserStory.userStory.followers.map((function(e){return JSON.stringify(e.id)})),p(c),S(!0),h((function(e){return e+1}));case 21:O(!1);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"flex flex-column vote-wrapper ".concat(a&&k?"vote-wrapper-voted":"")},r.a.createElement("div",{className:"votes-count",onClick:R},v),r.a.createElement("div",{className:"vote-button ".concat(a?"vote-button-clickable":""),onClick:function(){a&&!N&&I(t)}},r.a.createElement(b.A,{className:"eos-icons",color:"white"}),"Vote"),U&&r.a.createElement(g,{content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,0===t.followers.length?r.a.createElement("h1",null,"No Voters For This Story"):r.a.createElement("h1",null,"Voters For This Story")),t.followers.map((function(e){return r.a.createElement("div",{className:"flex flex-row author-information"},r.a.createElement("div",{className:"user-avatar avatar-vote"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(e.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",null,r.a.createElement(i.a,{className:"link-vote link link-default",to:"/profile/".concat(e.id)},e.username)))}))),handleClose:R,active:U}))},U=function(e){return e=(e=e.replace(/\\*"/g,'\\"')).replace(/[\r\n]/g,"")},T=function(e,t){return(e=e.replace(/<\s*[^>]*>/gi,"")).length>t&&(e="".concat(e.substring(0,t),"...")),e},R=a(16),I=a.n(R),q=function(){return r.a.createElement("div",{className:"story"},r.a.createElement("div",{className:"vote-wrapper-loading"},r.a.createElement(I.a,{height:80})),r.a.createElement("div",{className:"stories-content"},r.a.createElement("h3",null,r.a.createElement(I.a,{height:20})),r.a.createElement("p",null,r.a.createElement(I.a,null))),r.a.createElement("div",{className:"story-author story-subcontent"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement(I.a,{circle:!0,width:58,height:58})),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(I.a,{width:52}))),r.a.createElement("div",{className:"flex flex-column story-subcontent"},r.a.createElement(I.a,{width:52})),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("span",{className:"story-meta"},r.a.createElement(I.a,{width:52})),r.a.createElement("span",{className:"story-meta"},r.a.createElement(I.a,{width:52}))))},L=function(e){var t=e.stories;return e.isLoading?r.a.createElement("div",{className:"flex flex-column"},[1,2,3,4,5].map((function(e){return r.a.createElement(q,{key:e})}))):r.a.createElement("div",{className:"flex flex-column","data-cy":"stories"},t&&t.length?t.map((function(e,t){var a,n,c;return r.a.createElement("div",{className:"story",key:t},r.a.createElement(P,{story:e}),r.a.createElement("div",{className:"stories-content",onClick:function(){Object(i.c)("/story/".concat(e.id))}},r.a.createElement("h3",null,T(e.Title,80)),r.a.createElement("p",null,T(e.Description,80))),r.a.createElement("div",{className:"story-small-details"},r.a.createElement("div",{className:"story-author story-subcontent"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:null!==(a=null===e||void 0===e||null===(n=e.author)||void 0===n||null===(c=n.profilePicture)||void 0===c?void 0:c.url)&&void 0!==a?a:"https://avatars.dicebear.com/api/jdenticon/".concat(e.author.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("small",null,"Created by"),r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(e.author.id)},e.author.username))),r.a.createElement("div",{className:"flex flex-column story-subcontent"},r.a.createElement("small",null,"Category"),r.a.createElement("span",{className:"category-text"},e.Category)),r.a.createElement("div",{className:"flex flex-column s-metas"},r.a.createElement("span",{className:"story-meta"},r.a.createElement(b.c,{className:"eos-icons"}),e.Attachment.length),r.a.createElement("span",{className:"story-meta"},r.a.createElement(b.g,{className:"eos-icons"}),e.user_story_comments.length))))})):r.a.createElement("h3",null,"No stories"))},F=function(e){var t=e.getPage,a=e.storyCount,c=e.status,s=e.productQuery,l=Object(n.useState)(1),i=Object(o.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(o.a)(d,2),E=p[0],v=p[1];return Object(n.useEffect)((function(){m(1),t(1)}),[c,s,t]),Object(n.useEffect)((function(){if(a)if(a>=5){var e=Math.ceil(a/5);v(Object(f.a)(Array(e+1).keys()).slice(1))}else v([1])}),[a]),r.a.createElement("div",{className:"pagination"},r.a.createElement("span",{className:"btn btn-pagination ".concat(u<=1?"btn-pagination-disabled":""),onClick:function(){E.find((function(e){return e===u-1}))&&(m((function(e){return e-1})),t(u-1))}},r.a.createElement(b.o,{className:"eos-icons eos-18"}),"Prev"),r.a.createElement("div",{className:"btn btn-pagination"},E?E.map((function(e,a){return r.a.createElement("span",{className:"number ".concat(u===e?"selected":""),onClick:function(){m(e),t(e)},key:a},e)})):""),r.a.createElement("span",{className:"btn btn-pagination ".concat(u>=(null===E||void 0===E?void 0:E.length)?"btn-pagination-disabled":""),onClick:function(){E.find((function(e){return e===u+1}))&&(m((function(e){return e+1})),t(u+1))}},"Next",r.a.createElement(b.p,{className:"eos-icons eos-18"})))},B=function(e){var t=e.title,a=e.reference,c=e.curr,s=e.setCurr,l=e.itemList,i=e.selectstate,u=e.setpage,m=Object(v.a)(e,["title","reference","curr","setCurr","itemList","selectstate","setpage"]),d=Object(n.useState)(!1),p=Object(o.a)(d,2),f=p[0],E=p[1];return Object(n.useEffect)((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&E(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dropdown-main"},r.a.createElement("div",{className:"filter-title"},t),r.a.createElement("div",Object.assign({className:"dropdown-container",ref:a},m),r.a.createElement(h,{type:"button",className:"btn btn-transparent flex flex-row",onClick:function(){E(!f)}},f?r.a.createElement(b.q,{className:"eos-icons"}):r.a.createElement(b.n,{className:"eos-icons"}),"\xa0 ",r.a.createElement("div",{className:"curr"}," ",c," ")),r.a.createElement("div",{className:"dropdown ".concat(f?"dropdown-open dropdown-right":"dropdown-close dropdown-right")},r.a.createElement("ul",{className:"dropdown-list"},l.map((function(e,a){return r.a.createElement("li",{key:a,className:"dropdown-element",onClick:function(){return s(a=e),E(!1),void("Status"===t&&(i(a),u(1)));var a}},e)})))))))},D=function(){return r.a.createElement("div",{className:"loading-indicator"},r.a.createElement("img",{className:"loader-image",src:a(151),alt:"loader"}))},V=function(e){var t=e.isOpen,a=e.userTerm,c=e.setUserTerm,s=e.setAuthorQuery,l=e.setUsersSuggestionOpen,i=Object(n.useState)([]),u=Object(o.a)(i,2),p=u[0],f=u[1],v=Object(E.usePromiseTracker)({area:"user-suggest-dropdown"}).promiseInProgress,h=Object(n.useRef)(null),b=Object(n.useRef)();return Object(n.useEffect)((function(){var e=function(e){h.current&&!h.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[l]),Object(n.useEffect)((function(){if(a.length<=0)l(!1);else{"undefined"!==typeof b.current&&b.current.cancel(),b.current=N.a.CancelToken.source();var e=function(){var e=Object(d.a)(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("".concat(O.b,"/graphql"),{query:'query {\n            users (where: {\n              username_contains: "'.concat(a,'"\n            }) {\n              id\n              username\n              profilePicture {\n                url\n              }\n            }\n          }')},{cancelToken:b.current.token});case 2:r=e.sent,f(null!==(t=null===(n=r.data.data)||void 0===n?void 0:n.users)&&void 0!==t?t:[]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a.length>0?Object(E.trackPromise)(e(),"user-suggest-dropdown"):f([])}}),[a,l]),t?r.a.createElement("div",{ref:h,className:"flex flex-center dropdown user-suggest-dropdown"},v?r.a.createElement(D,null):p.length>0?r.a.createElement("ul",{className:"dropdown-list"},p.map((function(e){var t,a;return r.a.createElement("li",{key:e.id,onClick:function(){c(e.username),s(e.username),l(!1)},className:"user-data"},r.a.createElement("div",{className:"user-row flex flex-space-between flex-align-center"},r.a.createElement("img",{className:"avatar",src:null!==(t=null===e||void 0===e||null===(a=e.profilePicture)||void 0===a?void 0:a.url)&&void 0!==t?t:"https://avatars.dicebear.com/api/jdenticon/".concat(e.username,".svg"),alt:"Default User Avatar"}),r.a.createElement("span",null,e.username)))}))):r.a.createElement("p",null,"No users found")):null};var M=function(e){var t=e.searchTerm,a=e.setSearchTerm,c=e.userTerm,s=e.setUserTerm,l=e.setSearchQuery,i=e.setAuthorQuery,u=Object(n.useRef)(),m=Object(n.useState)("Title"),d=Object(o.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),v=Object(o.a)(E,2),g=v[0],y=v[1],w=function(){"Title"===p&&t.length>0?l('Title_contains: "'.concat(t,'"')):c.length>0&&(i(c),y(!1))};return r.a.createElement("div",{className:"flex flex-row search-controls"},r.a.createElement("div",{className:"flex flex-row search-input","data-cy":"search-input-div"},r.a.createElement(V,{isOpen:g,userTerm:c,setUserTerm:s,setAuthorQuery:i,setUsersSuggestionOpen:y}),r.a.createElement("input",{type:"text",name:"search",placeholder:"Search",autoComplete:"off","data-cy":"search-input",value:"Title"===p?t:c,onChange:function(e){"Title"===p?a(e.target.value):(s(e.target.value),y(!0))},onKeyDown:function(e){"Enter"===e.key&&w()},onFocus:function(){"Author"===p&&c.length>0&&y(!0)}}),r.a.createElement("div",{className:"close-btn-div"},r.a.createElement("span",{className:"close-btn","data-cy":"btn-clear",onClick:function(){"Title"===p&&t.length>0?a(""):c.length>0&&s("")}},("Title"===p&&t.length>0||"Author"===p&&c.length>0)&&r.a.createElement(b.e,{className:"eos-icons"}))),r.a.createElement(B,{title:"",reference:u,curr:p,setCurr:f,itemList:["Title","Author"],"data-cy":"toggle-title-dropdown"})),r.a.createElement(h,{type:"submit",className:"btn btn-default btn-search","data-cy":"btn-search",onClick:w},r.a.createElement(b.x,{className:"eos-icons",color:"white"})))},H={stateList:[{icon:r.a.createElement(b.w,{className:"eos-icons"}),status:"Under consideration"},{icon:r.a.createElement(b.d,{className:"eos-icons"}),status:"Planned"},{icon:r.a.createElement(b.s,{className:"eos-icons"}),status:"Designing"},{icon:r.a.createElement(b.f,{className:"eos-icons"}),status:"Implementing"},{icon:r.a.createElement(b.u,{className:"eos-icons"}),status:"Testing"},{icon:r.a.createElement(b.k,{className:"eos-icons"}),status:"Deployed"}],sortByList:["Most Voted","Most Discussed"]},_=function(){return r.a.createElement("div",{className:"flex flex-row flex-center product-card"},r.a.createElement("div",{className:"product-logo"},r.a.createElement(I.a,{height:80})),r.a.createElement("div",{className:"circle-container"},r.a.createElement("div",{className:"circle"})))},Y=function(e){var t,a=e.product,n=e.selected,c=e.setProduct;return r.a.createElement("div",{className:"flex flex-center flex-align-center product-card ".concat(n?"product-card-selected":""),"data-cy":"".concat(a.Name.split(" ").join("-"),"-card"),onClick:function(){c(n?"All":a.Name)}},r.a.createElement("div",{className:"product-logo"},r.a.createElement("img",{src:null===(t=a.logo)||void 0===t?void 0:t.url,alt:"".concat(a.Name," logo")})),r.a.createElement("div",{className:"circle-container"},r.a.createElement("div",{className:"circle"})))},z=function(e){var t=e.setProductQuery,a=Object(n.useState)(3),c=Object(o.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)("All"),u=Object(o.a)(i,2),p=u[0],E=u[1],v=Object(n.useState)(null),h=Object(o.a)(v,2),b=h[0],g=h[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getProductCount();case 2:t=e.sent,l(t.data.data.productsConnection.aggregate.count);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getProducts();case 2:return t=e.sent,e.abrupt("return",null!==t.data.data.product?g(Object(f.a)(t.data.data.products)):g([]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]),Object(n.useEffect)((function(){t("All"!==p?'product : {Name: "'.concat(p,'"}'):"")}),[p,t]),r.a.createElement("div",{className:"product-list-container"},r.a.createElement("h4",null,"Select a Product"),r.a.createElement("div",{className:"flex flex-row flex-center product-list"},!b&&Array(s).fill().map((function(e,t){return r.a.createElement(_,{key:t})})),null!==b&&b.map((function(e){return r.a.createElement(Y,{key:e.Name,product:e,selected:e.Name===p,setProduct:E})}))))},K=function(e){var t=e.authorId,a=e.followerId,c=Object(n.useState)("Under consideration"),s=Object(o.a)(c,2),l=s[0],i=s[1],u=Object(n.useState)(1),p=Object(o.a)(u,2),v=p[0],b=p[1],g=[],y=Object(n.useState)("Under consideration"),w=Object(o.a)(y,2),N=w[0],O=w[1],j=Object(n.useState)("Most Voted"),x=Object(o.a)(j,2),k=x[0],S=x[1],C=Object(n.useState)("All"),P=Object(o.a)(C,2),U=P[0],T=P[1],R=Object(n.useState)([]),I=Object(o.a)(R,2),q=I[0],D=I[1],V=Object(n.useState)(""),_=Object(o.a)(V,2),Y=_[0],K=_[1],W=Object(E.usePromiseTracker)({area:"stories-div"}).promiseInProgress,Q=Object(n.useState)(),G=Object(o.a)(Q,2),J=G[0],X=G[1],Z=Object(n.useState)([]),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useRef)(),ne=Object(n.useRef)(),re=Object(n.useRef)(),ce=Object(n.useState)(""),se=Object(o.a)(ce,2),le=se[0],oe=se[1],ie=Object(n.useState)(""),ue=Object(o.a)(ie,2),me=ue[0],de=ue[1],pe=Object(n.useState)(""),fe=Object(o.a)(pe,2),Ee=fe[0],ve=fe[1],he=Object(n.useState)(""),be=Object(o.a)(he,2),ge=be[0],ye=be[1],we=Object(n.useState)(""),Ne=Object(o.a)(we,2),Oe=Ne[0],je=Ne[1],xe=Object(n.useCallback)((function(e){b(e)}),[]);return Object(n.useEffect)((function(){for(var e=0;e<H.stateList.length;e++)g.push(H.stateList[e].status)}),[g]),Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getStoryCount(l,t,Oe,me,le,Ee,a);case 2:n=e.sent,X(n.data.data.userStoriesConnection.aggregate.count);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l,me,le,Ee,Oe,t,a]),Object(n.useEffect)((function(){de("All"!==U?'Category : "'.concat(U,'"'):""),""===Y&&ve(""),""===ge&&je("")}),[U,Y,ge]),Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getStories(v,l,t,Oe,me,le,Ee,a);case 2:n=e.sent,te(n.data.data.userStories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e(),"stories-div")}),[me,l,v,le,Ee,Oe,t,a]),Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getCategories();case 2:t=e.sent,D(["All"].concat(Object(f.a)(t.data.data.__type.enumValues.map((function(e){return e.name})))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){var e=function(e,t){return e.followers.length>t.followers.length?-1:1},t=function(e,t){return e.user_story_comments.length>t.user_story_comments.length?-1:1},a=function(){var a=Object(d.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"Most Voted"===k&&te(ee.sort(e)),"Most Discussed"===k&&te(ee.sort(t));case 2:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Object(E.trackPromise)(a(),"stories-div")}),[k,ee,te]),r.a.createElement("div",null,r.a.createElement(z,{setProductQuery:oe}),r.a.createElement("div",{className:"roadmap-container"},r.a.createElement("div",{className:"roadmap"},H.stateList&&H.stateList.map((function(e,t){return r.a.createElement(h,{className:l===e.status?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",key:t,onClick:function(){i(e.status),b(1)}},e.icon,e.status)})))),r.a.createElement("div",{className:"roadmap-dropdown"},r.a.createElement(B,{title:"Status",reference:ae,curr:N,setCurr:O,itemList:g,"data-cy":"status-dropdown",selectstate:i,setpage:b})),r.a.createElement("div",{className:"flex flex-row search-bar"},r.a.createElement(M,{searchTerm:Y,setSearchTerm:K,userTerm:ge,setUserTerm:ye,setSearchQuery:ve,setAuthorQuery:je}),r.a.createElement("div",{className:"flex flex-row options-bar"},r.a.createElement(B,{title:"Categories",reference:re,curr:U,setCurr:T,itemList:q,"data-cy":"category-dropdown"}),r.a.createElement(B,{title:"Sort By",reference:ne,curr:k,setCurr:S,itemList:H.sortByList}))),r.a.createElement("div",{className:"stories-div"},r.a.createElement(L,{stories:ee,isLoading:W})),r.a.createElement(F,{getPage:xe,storyCount:J,status:l,productQuery:le}))},W=a(102),Q=a.n(W),G=Object(n.createContext)(),J=function(){var e=Object(n.useContext)(G).dispatch;return{registerUser:function(){var t=Object(d.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.post("".concat(O.b,"/auth/local/register"),a,{withCredentials:!0}).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),login:function(){var t=Object(d.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.post("".concat(O.b,"/auth/local"),a,{withCredentials:!0}).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,r=n.data,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),logout:function(){var t=Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.post("".concat(O.b,"/logout"),{},{withCredentials:!0}).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:localStorage.clear();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),forgotPassword:function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.post("".concat(O.b,"/auth/forgot-password"),a).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),resetPassword:function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.post("".concat(O.b,"/auth/reset-password"),a).catch((function(t){"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:t.response.data.message[0].messages[0].message})}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),changePassword:function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.password===a.passwordConfirmation){t.next=3;break}return e({type:"ERROR",payload:"The new password and confirm passwords do not match."}),t.abrupt("return",null);case 3:return t.next=5,N.a.post("".concat(O.b,"/auth/change-password"),a,{withCredentials:!0}).catch((function(t){var a,n,r,c,s;"Network Error"===t.message?e({type:"ERROR",payload:t.message}):e({type:"ERROR",payload:null===(a=t.response.data)||void 0===a||null===(n=a.message)||void 0===n||null===(r=n[0])||void 0===r||null===(c=r.messages)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.message})}));case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},X=function(){var e=localStorage.getItem("id"),t=Object(n.useContext)(G).state,a=Object(n.useState)([]),c=Object(o.a)(a,2),s=c[0],l=c[1],u=Object(n.useState)(!1),p=Object(o.a)(u,2),f=p[0],E=p[1],v=Object(n.useState)(0),h=Object(o.a)(v,2),g=h[0],y=h[1],w=Object(n.useState)(!1),N=Object(o.a)(w,2),O=N[0],j=N[1],x=Object(n.useRef)();Object(n.useEffect)((function(){var e=function(e){x.current&&!x.current.contains(e.target)&&E(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[x]),Object(n.useEffect)((function(){e&&function(){var t=Object(d.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.getNotificationsByUserId(e);case 2:a=t.sent,n=[],a.data.data.userStoryNotifications&&(n=(n=a.data.data.userStoryNotifications).filter((function(t){return!t.seenBy.map((function(e){return e.id})).includes(e)}))),l(n),y(n.length);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e,O]);var k=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=a.seenBy.map((function(e){return e.id}))).includes(e)){t.next=5;break}return n.push(e),t.next=5,A.markNotificationAsRead(a.id,n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:Object(i.c)("/".concat(t.link));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t.auth&&r.a.createElement("div",{className:"dropdown-container",onClick:function(){E(!f),j(!0)},ref:x},r.a.createElement(b.t,{className:"eos-icons ".concat(f?"eos-icons-open":"")}),r.a.createElement("span",{className:"notifications-count"}," ",!O&&g>0?g:""),r.a.createElement("div",{className:"dropdown notifications-dropdown ".concat(f?"dropdown-open dropdown-left":"dropdown-close dropdown-left")},r.a.createElement("ul",{className:"dropdown-list"},s?s.map((function(e,t){return r.a.createElement("li",{className:"dropdown-element",onClick:function(){return S(e)},key:t},e.message,r.a.createElement("hr",{className:"dropdown-separator"}))})):""),r.a.createElement("div",{className:"flex flex-row flex-space-between notifications-options"},s&&s.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{className:"link link-default",to:"#",onClick:function(){s&&s.forEach(function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:l([]),y(0),j(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},"Mark all as read")):"No new notifications at the moment",r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{className:"link link-default",to:"/notifications"},"View all")))))},Z=function(e){var t=J().logout,a=localStorage.getItem("username"),c=localStorage.getItem("email"),s=Object(n.useContext)(G),l=s.state,u=s.dispatch,p=Object(n.useState)(!1),f=Object(o.a)(p,2),E=f[0],v=f[1],h=Object(n.useRef)();Object(n.useEffect)((function(){var e=function(e){h.current&&!h.current.contains(e.target)&&v(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[h]);var g=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:u({type:"DEAUTHENTICATE"}),Object(i.c)("/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("header",{className:"nav-header"},r.a.createElement(i.a,{className:"link","data-cy":"nav-eos-logo",to:"/"},r.a.createElement("img",{className:"logo",src:Q.a,alt:""})),r.a.createElement("nav",{className:"navbar-content flex flex-row"},l.auth&&r.a.createElement(i.a,{className:"btn btn-default","data-cy":"btn-new-story",to:"/newStory"},"+ New Story"),!l.auth&&r.a.createElement(i.a,{className:"btn btn-default","data-cy":"btn-signin",to:"/login"},"Sign In"),r.a.createElement(X,null),l.auth&&r.a.createElement("div",{className:"dropdown-container",onClick:function(){v(!E)},ref:h},r.a.createElement(b.a,{className:"eos-icons ".concat(E?"eos-icons-open":"")}),r.a.createElement("div",{className:"dropdown nav-dropdown ".concat(E?"dropdown-open dropdown-left":"dropdown-close dropdown-left")},r.a.createElement("ul",{className:"dropdown-list nav-dropdown-list"},r.a.createElement("li",{className:"user-dropdown user-dropdown-name"},a),r.a.createElement("li",{className:"user-dropdown user-dropdown-email"},c),r.a.createElement("hr",{className:"dropdown-separator"}),r.a.createElement("li",{className:"dropdown-element",onClick:function(){return Object(i.c)("/myStories")}},r.a.createElement(b.r,{className:"eos-icons eos-18"}),"My Stories"),r.a.createElement("li",{className:"dropdown-element",onClick:function(){return Object(i.c)("/myProfile")}},r.a.createElement(b.y,{className:"eos-icons eos-18"}),"My Account"),r.a.createElement("hr",{className:"dropdown-separator"}),r.a.createElement("li",{className:"dropdown-element",onClick:g},r.a.createElement(b.m,{className:"eos-icons eos-18"}),"Log Out"))))))},$=function(){var e=J().logout,t=localStorage.getItem("id"),c=Object(n.useContext)(G).dispatch,s=Object(n.useState)(!1),l=Object(o.a)(s,2),u=l[0],f=l[1],E=Object(n.useState)(),v=Object(o.a)(E,2),h=v[0],b=v[1];Object(n.useEffect)((function(){t&&function(){var e=Object(d.a)(m.a.mark((function e(){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getPolicyNotifications();case 2:(a=e.sent).data.data.userStoryNotifications&&(r=null===(n=a.data.data.userStoryNotifications[0])||void 0===n?void 0:n.seenBy.map((function(e){return e.id})),a.data.data.userStoryNotifications.length&&!r.includes(t)&&(f(!0),b(a.data.data.userStoryNotifications[0])));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]);var y=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=h.seenBy.map((function(e){return e.id}))).push(t),e.next=4,A.markNotificationAsRead(h.id,a);case 4:f(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var a=Object(d.a)(m.a.mark((function a(){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=4;break}return a.next=3,e();case 3:c({type:"DEAUTHENTICATE"});case 4:f(!1);case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Home | EOS User story"),r.a.createElement("meta",{name:"description",content:"Share with us how you use our products, relate to other users stories, vote them up, and we'll make sure we deliver cohesive solutions that enhance your experience."}),r.a.createElement("meta",{name:"keywords",content:"feature request, open roadmap, user voice, feature request tracking, issue tracker open source "})),r.a.createElement(Z,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"product-introduction"},r.a.createElement("div",null,r.a.createElement("h1",null,"TELL US YOUR STORY"),r.a.createElement("h2",{className:"subheader"},"Share with us how you use our products, relate to other users' stories, vote them up, and we'll make sure we deliver cohesive solutions that enhance your experience.")),r.a.createElement("div",{className:"img-wrap"},r.a.createElement("img",{className:"profile-picture",src:a(152),alt:"profile pic"}))),r.a.createElement(K,null))),u&&h?r.a.createElement(g,{showButtons:!0,onCancel:w,isActive:u,show:function(){return f(!1)},onOk:y},r.a.createElement(r.a.Fragment,null,h.message,r.a.createElement(i.a,{className:"link link-default",to:"/".concat(h.link)},"View privacy policy"))):"")},ee=a(18),te=a(298),ae=function(e){var t=e.type,a=e.status,n=e.message;return r.a.createElement("div",null,a?r.a.createElement("div",{className:"form-error alert alert-section alert-danger"},r.a.createElement(b.l,{className:"alert-icon eos-icons",color:"red"}),r.a.createElement("div",{class:"alert-body"},null!==a&&a,null!==n&&n)):r.a.createElement("div",{className:"form-error"},r.a.createElement(b.l,{className:"eos-icons",color:"red"}),"required"===t&&"This is required","validate"===t&&"Passwords do not match","emptyDescription"===t&&"Description cannot be empty",null!==n&&n))},ne=function(e){var t=e.translator,a=Object(n.useRef)(),c=Object(n.useState)(!1),s=Object(o.a)(c,2),l=s[0],i=s[1];return Object(n.useEffect)((function(){var e=function(e){a.current&&!a.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[a]),r.a.createElement("div",{className:"dropdown-container",ref:a},r.a.createElement(h,{type:"button",className:"btn btn-secondary flex flex-row",onClick:function(e){i(!l)}},l?r.a.createElement(b.q,{className:"eos-icons"}):r.a.createElement(b.n,{className:"eos-icons"}),"\xa0 ",r.a.createElement("div",{className:"curr"}," Language ")),l?r.a.createElement("div",{className:"dropdown"},r.a.createElement("ul",{className:"dropdown-list"},r.a.createElement("li",{className:"dropdown-element",onClick:function(){t.changeLanguage("en"),i(!1)}},"English"),r.a.createElement("li",{className:"dropdown-element",onClick:function(){t.changeLanguage("es"),i(!1)}},"Spanish"))):"")},re=a(103),ce=a.n(re),se=function(){return r.a.createElement("div",{className:"social-media"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/eosdesignsystem?lang=en"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},r.a.createElement("g",{"data-name":"Group 60"},r.a.createElement("g",{"data-name":"Group 62"},r.a.createElement("g",{"data-name":"Rectangle 278"},r.a.createElement("path",{"data-name":"Rectangle 1959",d:"M0 0h24v24H0z"})),r.a.createElement("g",{"data-name":"Path 18"},r.a.createElement("path",{"data-name":"Path 628",d:"M20.032 6.899a7.368 7.368 0 01-1.887.521 3.1 3.1 0 001.431-1.822 6.77 6.77 0 01-2.082.813A3.291 3.291 0 0011.8 8.656a2.742 2.742 0 00.1.748 9.284 9.284 0 01-6.8-3.448 3.584 3.584 0 00-.423 1.659 3.286 3.286 0 001.464 2.733 3.319 3.319 0 01-1.5-.423v.033a3.283 3.283 0 002.639 3.221 3.008 3.008 0 01-1.5.065 3.3 3.3 0 003.059 2.278 6.642 6.642 0 01-4.1 1.4 6.364 6.364 0 01-.781-.033 9.184 9.184 0 005.076 1.5 9.306 9.306 0 009.371-9.24v-.558a6.727 6.727 0 001.627-1.692z",fill:"#fff"})))))),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.linkedin.com/company/eosdesignsystem/"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24"},r.a.createElement("g",{"data-name":"Group 61"},r.a.createElement("g",{"data-name":"Group 63"},r.a.createElement("g",{"data-name":"Rectangle 280"},r.a.createElement("path",{"data-name":"Rectangle 1961",d:"M0 0h24v24H0z"})),r.a.createElement("g",{"data-name":"iconfinder 201-LinkedIn 192159"},r.a.createElement("g",{"data-name":"Path 19"},r.a.createElement("path",{"data-name":"Path 630",d:"M16.802 19.604v-6.058a1.8 1.8 0 00-1.747-1.621 1.9 1.9 0 00-1.854 1.541v6.138h-3.23l.053-10.007h3.124l-.025 1.262a3.139 3.139 0 013.106-1.644c2.453 0 3.565 1.41 3.772 4.047v6.347zM6.011 8.175a1.788 1.788 0 11.438 0 1.789 1.789 0 01-.438 0zm1.993 11.441H4.032V9.622l3.97-.025z",fill:"#fff"}))))))))},le=function(){var e=Object(te.a)().t;return r.a.createElement("div",{className:"container-left"},r.a.createElement("div",{className:"container-left-content"},r.a.createElement("div",{className:"header header-uppercase"},e("authentication:header-left")),r.a.createElement("p",null,e("authentication:user-stories-description")),r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,e("authentication:footer-left")," -"," ",r.a.createElement("a",{className:"link link-default",href:"/policies"},"Learn More"))),r.a.createElement(se,null)))},oe=function(e){var t=e.children,a=e.logo,n=Object(te.a)(),c=n.t,s=n.i18n;return r.a.createElement("div",{className:"container-right"},r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement("div",{className:"image image-logo eos-logo-resize"},r.a.createElement("img",{src:null!==a&&void 0!==a?a:ce.a,alt:"EOS Logo"})),r.a.createElement(ne,{translator:s})),t,r.a.createElement("div",{className:"footer"},r.a.createElement("span",null,r.a.createElement(b.i,{className:"eos-icons"}),r.a.createElement("span",null," ",c("authentication:footer-right")," ")),r.a.createElement("a",{className:"link link-default",href:"/policies"}," ","Cookies and Privacy policy")),r.a.createElement("div",{className:"cookies-mobile"},r.a.createElement("p",null,c("authentication:footer-left")," -"," ",r.a.createElement("a",{className:"link link-default",href:"/policies"},"Learn More"))))},ie=function(e){var t=e.children;return r.a.createElement("div",{className:"authentication-wrapper"},r.a.createElement("div",{className:"authentication"},t))},ue=function(e){var t=e.message,a=Object(te.a)().t,c=J().login,s=Object(ee.a)(),l=s.register,u=s.handleSubmit,f=s.errors,E=Object(n.useState)(!1),v=Object(o.a)(E,2),g=v[0],y=v[1],w=Object(n.useContext)(G),N=w.state,O=w.dispatch,j=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({identifier:t.identifier,password:t.password});case 3:a=e.sent,localStorage.setItem("id",a.user.id),localStorage.setItem("username",a.user.username),localStorage.setItem("email",a.user.email),O({type:"AUTHENTICATE"}),Object(i.c)("/",{replace:!0}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return N.auth?(Object(i.c)("/",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Login | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ie,null,r.a.createElement(le,null),r.a.createElement(oe,null,r.a.createElement("div",null,r.a.createElement("form",{className:"form-default",onSubmit:u(j)},r.a.createElement("div",{className:"header"},a("authentication:title-sign-in")),t&&r.a.createElement(ae,{message:t}),N.errorCode&&r.a.createElement(ae,{status:N.errorCode}),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"identifer"},a("authentication:username-label")),r.a.createElement("input",{className:"input-default",type:"text",name:"identifier",ref:l({required:!0})}),f.identifier&&r.a.createElement(ae,{type:f.identifier.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},a("authentication:password-label")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"input-default",type:g?"text":"password",name:"password",ref:l({required:!0})}),r.a.createElement("div",{className:"input-group-append",onClick:function(){return y(!g)}},g?r.a.createElement(b.C,{className:"eos-icons eos-18"}):r.a.createElement(b.B,{className:"eos-icons eos-18"}))),f.password&&r.a.createElement(ae,{type:f.password.type})),r.a.createElement(h,{type:"submit",className:"btn btn-default"},a("authentication:login-label"))),r.a.createElement("div",{className:"flex flex-row flex-space-between margin-top-l"},r.a.createElement(i.a,{className:"link link-default",to:"/forgotPassword"},a("authentication:forgot-password")),r.a.createElement(i.a,{className:"link link-default","data-cy":"link-create-account",to:"/register"},a("authentication:create-account")))))))},me=function(){var e=J().registerUser,t=Object(n.useContext)(G),a=t.state,c=t.dispatch,s=Object(ee.a)(),l=s.register,o=s.handleSubmit,u=s.errors,f=Object(te.a)().t,E=function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e({username:a.username,email:a.email,password:a.password});case 3:n=t.sent,localStorage.setItem("status",n.status),localStorage.setItem("id",n.user.id),localStorage.setItem("username",n.user.username),localStorage.setItem("email",n.user.email),c({type:"AUTHENTICATE"}),Object(i.c)("/",{replace:!0}),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}();return a.auth?(Object(i.c)("/",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Registration page | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ie,null,r.a.createElement(le,null),r.a.createElement(oe,null,r.a.createElement("div",null,r.a.createElement("form",{className:"form-default",onSubmit:o(E)},r.a.createElement("div",{className:"header"},f("authentication:title-sign-up")),a.errorCode&&r.a.createElement(ae,{status:a.errorCode}),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"username"},f("authentication:username-label")),r.a.createElement("input",{className:"input-default",type:"text",name:"username","data-cy":"username",ref:l({required:!0})}),u.username&&r.a.createElement(ae,{type:u.username.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"email"},f("authentication:email-label")),r.a.createElement("input",{className:"input-default",type:"text",name:"email","data-cy":"email",ref:l({required:!0})}),u.email&&r.a.createElement(ae,{type:u.email.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},f("authentication:password-label")),r.a.createElement("input",{className:"input-default",type:"password",name:"password","data-cy":"password",ref:l({required:"This is required",minLength:{value:8,message:"Password must have at least 8 characters"}})}),u.password&&r.a.createElement(ae,{message:u.password.message})),r.a.createElement("div",{className:"form-element"},r.a.createElement("div",{className:"flex flex-row flex-align-center "},r.a.createElement("input",{type:"checkbox",name:"tc","data-cy":"tc",ref:l({required:"You must accept our Terms and Conditions"})}),r.a.createElement("label",{htmlFor:"tc"},"I agree to the"," ",r.a.createElement(i.a,{className:"link link-default",to:"/policies"},"Terms and Conditions"),u.tc&&r.a.createElement(ae,{message:u.tc.message})))),r.a.createElement(h,{type:"submit",className:"btn btn-default","data-cy":"btn-register"},f("authentication:register-label"))),r.a.createElement("div",{className:"flex flex-row flex-space-between margin-top-l"},r.a.createElement(i.a,{className:"link link-default",to:"/login"},f("authentication:existing-user")))))))},de=function(){var e=Object(te.a)().t,t=Object(n.useContext)(G).state,a=J().forgotPassword,c=Object(ee.a)(),s=c.register,l=c.handleSubmit,u=c.errors,f=Object(n.useState)(""),E=Object(o.a)(f,2),v=E[0],b=E[1],g=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({email:t.email});case 3:n=e.sent,b(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Forgot password? | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ie,null,r.a.createElement(le,null),r.a.createElement(oe,null,r.a.createElement("div",null,r.a.createElement("div",{className:"header"},e("authentication:forgot-password")),v?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"We have e-mailed you a password reset link")):r.a.createElement(r.a.Fragment,null,t.errorCode&&r.a.createElement(ae,{status:t.errorCode}),r.a.createElement("form",{className:"form-default",onSubmit:l(g)},r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"email"},e("authentication:email-label")),r.a.createElement("input",{className:"input-default",type:"email",name:"email",ref:s({required:!0})}),u.email&&r.a.createElement(ae,{type:u.email.type})),r.a.createElement(h,{type:"submit",className:"btn btn-default"},e("authentication:submit-label"))),r.a.createElement("div",{className:"flex flex-row flex-space-between margin-top-l"},r.a.createElement(i.a,{className:"link link-default",to:"/login"},e("authentication:existing-user"))))))))},pe=function(){var e=Object(te.a)().t,t=Object(n.useContext)(G).state,a=J().resetPassword,c=Object(ee.a)(),s=c.register,l=c.handleSubmit,u=c.errors,f=Object(i.d)(),E=Object(n.useState)(""),v=Object(o.a)(E,2),b=v[0],g=v[1],y=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a({code:f.search.slice(6),password:t.password,passwordConfirmation:t.passwordConfirmation});case 3:n=e.sent,g(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Reset your password | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ie,null,r.a.createElement(le,null),r.a.createElement(oe,null,r.a.createElement("div",null,b?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},e("authentication:forgot-password")),r.a.createElement("p",null,"Your password has been reset."),r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement(i.a,{className:"link link-default",to:"/login"},e("authentication:reset-password-done")))):r.a.createElement(r.a.Fragment,null,t.errorCode&&r.a.createElement(ae,{status:t.errorCode}),r.a.createElement("form",{className:"form-default",onSubmit:l(y)},r.a.createElement("div",{className:"header"},e("authentication:reset-password")),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},e("authentication:new-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"password",ref:s({required:!0})}),u.password&&r.a.createElement(ae,{type:u.password.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"confirm-password"},e("authentication:confirm-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"passwordConfirmation",ref:s({required:!0})}),u.passwordConfirmation&&r.a.createElement(ae,{type:u.passwordConfirmation.type})),r.a.createElement(h,{type:"submit",className:"btn btn-default"},e("authentication:submit-label"))))))))},fe=a(107),Ee=a.n(fe),ve=a(108),he=a.n(ve),be=(a(212),(new Ee.a).set({html:!0}));var ge=function(e){var t=e.value,a=e.callback,c=Object(n.useState)(""),s=Object(o.a)(c,2),l=s[0],i=s[1];return r.a.createElement(he.a,{config:{view:{html:!1}},plugins:["header","font-bold","font-italic","list-unordered","list-ordered","link","mode-toggle"],style:{height:"350px"},renderHTML:function(e){return be.render(e)},onChange:function(e){var n=e.html,r=e.text;"undefined"===typeof t&&i(r),a(n,r)},value:null!==t&&void 0!==t?t:l})},ye=a(109),we=function(e){var t=e.title,a=Object(n.useState)([]),c=Object(o.a)(a,2),s=c[0],l=c[1],i=Object(n.useCallback)(Object(ye.debounce)(function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getStoriesByTitle(t);case 2:a=e.sent,l(a.data.data.userStories);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),600),[]);return Object(n.useEffect)((function(){t&&i(t)}),[t,i]),t?r.a.createElement("div",{className:"flex flex-column title-search"},r.a.createElement("h4",null,r.a.createElement(b.b,{className:"eos-icons"}),s.length>0?" We found some matching results":" No matching stories found. Go ahead and create one."),s.map((function(e,t){return r.a.createElement("div",{className:"story title-search-results",onClick:function(){return window.open("/story/".concat(e.id),"_blank")},key:t},r.a.createElement("div",{className:"stories-content title-search-result"},r.a.createElement("h4",null,T(e.Title,80))),r.a.createElement("div",{className:"icon-display"},e.followers.length,r.a.createElement(b.A,{className:"eos-icons"})))}))):""},Ne=a(47),Oe=function(e){var t=e.attachments,a=e.setAttachments,n=t.map((function(e){return r.a.createElement("div",{className:"preview-root",key:e.name},r.a.createElement("button",{className:"preview-remove-button",onClick:function(){return n=e.name,void a(t.filter((function(e){return e.name!==n})));var n}},"\xd7"),r.a.createElement("div",{className:"preview-inner"},r.a.createElement("img",{src:e.preview,className:"preview-image",alt:"preview"})))}));return r.a.createElement("div",{className:"preview-container"},n)},je=function(e){var t=e.attachments,a=e.setAttachments,c=Object(Ne.a)({multiple:!0,onDrop:function(e){a((function(t){return[].concat(Object(f.a)(t),Object(f.a)(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}))))}))}}),s=c.getRootProps,l=c.getInputProps;return Object(n.useEffect)((function(){return function(){t.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[t]),r.a.createElement("section",{className:"container"},r.a.createElement("div",s({className:"dropzone"}),r.a.createElement("input",l()),r.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")),r.a.createElement(Oe,{attachments:t,setAttachments:a}))},xe={None:""},ke=function(){var e=Object(n.useContext)(G).state,t=Object(ee.a)(),a=t.register,c=t.handleSubmit,s=t.errors,l=t.watch,u=Object(n.useState)("None"),f=Object(o.a)(u,2),v=f[0],b=f[1],g=Object(n.useState)(!1),w=Object(o.a)(g,2),N=w[0],O=w[1],j=Object(n.useState)(xe),x=Object(o.a)(j,2),k=x[0],S=x[1],C=Object(n.useState)(""),P=Object(o.a)(C,2),T=P[0],R=P[1],I=Object(n.useState)([]),q=Object(o.a)(I,2),L=q[0],F=q[1],B=Object(n.useState)([]),V=Object(o.a)(B,2),M=V[0],H=V[1],_=Object(n.useState)([]),Y=Object(o.a)(_,2),z=Y[0],K=Y[1],W=Object(E.usePromiseTracker)().promiseInProgress,Q=Object(n.useState)(0),J=Object(o.a)(Q,2),X=J[0],$=J[1],te=Object(n.useState)([]),ne=Object(o.a)(te,2),re=ne[0],ce=ne[1];Object(n.useLayoutEffect)((function(){function e(){$(window.innerWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getCategories();case 2:t=e.sent,F(t.data.data.__type.enumValues.map((function(e){return e.name})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e());var t=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getProductsWithTemplates();case 2:t=e.sent,a=t.data.data.products,K(a),n={},a.forEach((function(e){var t;n[e.id]=null!==(t=e.product_template)&&void 0!==t?t:""})),S(Object(y.a)(Object(y.a)({},xe),n));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(t());var a=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getPriorities();case 2:t=e.sent,H(t.data.data.__type.enumValues.map((function(e){return e.name})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(a())}),[]);var se=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Description=U(T),(a=new FormData).append("data",JSON.stringify(t)),re.length&&re.forEach((function(e){a.append("files.Attachment",e)})),e.next=6,A.createStory(a);case 6:Object(i.c)("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"New story | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Z,null),W?r.a.createElement(D,null):r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"flex flex-row body-wrapper"},r.a.createElement("div",{className:"newstory"},r.a.createElement("h3",null,"New Story"),r.a.createElement("form",{className:"form-default",onSubmit:c(se)},r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{className:"input-default",type:"text",name:"Title","data-cy":"title",autoComplete:"off",ref:a({required:"Title cannot be empty"})}),s.Title&&r.a.createElement(ae,{message:s.Title.message})),X<=1120?r.a.createElement(we,{title:l("Title")}):"",r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"product"},"Product"),r.a.createElement("select",{className:"select-default",name:"product","data-cy":"product",onChange:function(e){var t,a=e.target.value,n=z.find((function(e){return e.id===a}));b(null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:"None")},ref:a({required:"Product must be set"})},r.a.createElement("option",{defaultValue:!0,value:""},"Select a product"),z&&z.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.Name)}))),s.product&&r.a.createElement(ae,{message:s.product.message})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"category"},"Category"),r.a.createElement("select",{className:"select-default",name:"Category","data-cy":"category",ref:a({required:"Category must be set"})},r.a.createElement("option",{defaultValue:!0,value:""},"Select a category"),L&&L.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),s.Category&&r.a.createElement(ae,{message:s.Category.message})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"priority"},"Priority"),r.a.createElement("select",{className:"select-default",name:"Priority","data-cy":"priority",ref:a({required:"Priority must be set"})},r.a.createElement("option",{defaultValue:!0,value:""},"Select priority"),M&&M.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),s.Priority&&r.a.createElement(ae,{message:s.Priority.message})),r.a.createElement("div",{className:"form-element","data-cy":"description-editor"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement(ge,{callback:function(e,t){var a={};a[v]=t,R(e),O(!1),S(Object(y.a)(Object(y.a)({},k),a))},value:k[v]}),N&&r.a.createElement(ae,{type:"emptyDescription"})),r.a.createElement(je,{attachments:re,setAttachments:ce}),r.a.createElement("div",{className:"flex flex-row flex-center"},r.a.createElement(h,{type:"submit","data-cy":"btn-submit",className:"btn btn-default",onClick:function(){(null===T||void 0===T?void 0:T.length)||O(!0)}},"Submit")))),X>1120?r.a.createElement(we,{title:l("Title")}):""))):r.a.createElement(ue,{message:"Please login to create a new story"})},Se=a(294),Ce=a(295),Ae=a(296),Pe=a(297),Ue=a(61),Te=a.n(Ue),Re=function(e){var t,a=e.imageArray,n=null!==(t=null===a||void 0===a?void 0:a.map((function(e){return{original:e.url,thumbnail:e.url}})))&&void 0!==t?t:[];return 1!==a.length?r.a.createElement(Te.a,{items:n,showBullets:!0,lazyLoad:!0}):r.a.createElement(Te.a,{items:n,lazyLoad:!0,showPlayButton:!1,showThumbnails:!1})},Ie=function(e){var t=e.story,c=e.currentStatus,s=localStorage.getItem("id"),l=t.followers.map((function(e){return JSON.stringify(e.id)})),u=Object(n.useState)(l),p=Object(o.a)(u,2),f=p[0],E=p[1],v=Object(n.useState)(t.followers.length),h=Object(o.a)(v,2),y=h[0],w=h[1],N=Object(n.useState)(!1),O=Object(o.a)(N,2),j=O[0],x=O[1],k=Object(n.useState)(!1),S=Object(o.a)(k,2),C=S[0],P=S[1],U=Object(n.useState)(!1),T=Object(o.a)(U,2),R=T[0],I=T[1],q=Object(n.useState)([]),L=Object(o.a)(q,2),F=L[0],B=L[1],D=function(){I(!R)};Object(n.useEffect)((function(){!function(){for(var e=[],t=0;t<H.stateList.length&&(e.push(H.stateList[t].status),H.stateList[t].status!==c);t++);B(e)}()}),[c]),Object(n.useEffect)((function(){t.followers.map((function(e){return e.id})).includes(s)&&P(!0)}),[t.followers,s]);var V=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),!C){e.next=12;break}return a=f.filter((function(e){return e!==JSON.stringify(s)})),e.next=5,A.updateVotes(t.id,a);case 5:n=e.sent,a=n.data.data.updateUserStory.userStory.followers.map((function(e){return JSON.stringify(e.id)})),E(a),P(!1),w((function(e){return e-1})),e.next=21;break;case 12:return f.push(JSON.stringify(s)),r=f,e.next=16,A.updateVotes(t.id,r);case 16:c=e.sent,r=c.data.data.updateUserStory.userStory.followers.map((function(e){return JSON.stringify(e.id)})),E(r),P(!0),w((function(e){return e+1}));case 21:x(!1);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"flex flex-column story-vote-wrapper ".concat(s&&C?"story-vote-wrapper-voted":"")},r.a.createElement("div",{className:"story-vote-button ".concat(s?"story-vote-button-clickable":""),onClick:function(){s&&!j&&V(t)}},r.a.createElement(b.A,{className:"eos-icons",color:"white",size:"l"})),r.a.createElement("div",{className:"story-votes-count",onClick:D},y," Votes"),R&&r.a.createElement(g,{content:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,0===t.followers.length?r.a.createElement("h1",null,"No Voters For This Story"):r.a.createElement("h1",null,"Voters For This Story")),t.followers.map((function(e){return r.a.createElement("div",{className:"flex flex-row author-information"},r.a.createElement("div",{className:"user-avatar avatar-vote"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(e.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",null,r.a.createElement(i.a,{className:"link-vote link link-default",to:"/profile/".concat(e.id)},e.username)))}))),handleClose:D,active:R})),r.a.createElement("div",{className:"storypage-timeline"},H.stateList.map((function(e,t){return r.a.createElement("div",{className:"status-element",key:t},F.includes(e.status)?r.a.createElement("div",{className:"status-current"},r.a.createElement("div",{className:"status-icon"},e.icon,e.status)):r.a.createElement("div",{className:"status-previous"},r.a.createElement("div",{className:"status-icon"},e.icon,e.status)))}))),r.a.createElement("div",{className:"story-pattern"},r.a.createElement("img",{src:a(213),alt:"pattern"})))},qe=function(e){var t=e.txt,a=e.textLength,c=e.maxCharacterLimit,s=void 0===c?350:c,l=t,i=Object(n.useState)(!0),u=Object(o.a)(i,2),m=u[0],d=u[1],p=m?l.slice(0,s):l;return r.a.createElement(r.a.Fragment,null,a<=s?r.a.createElement("div",{dangerouslySetInnerHTML:{__html:p},className:"story-description flex-column","data-cy":"story-description"}):r.a.createElement("div",{className:"flex flex-column story-description"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:p},"data-cy":"story-description"}),r.a.createElement(h,{className:"btn btn-transparent btn-reply",onClick:function(){d(!m)}}," ",m?"Show More":"Show Less"," ")))},Le=a(64),Fe=function(e){var t=e.id,a=e.attachments,c=e.setAttachments,s=e.addComment,l=e.comment,i=e.setComment,u=e.cta,p=e.placeholder,E=Object(ee.a)(),v=E.register,g=E.errors,y=E.handleSubmit,w=Object(n.useState)([]),N=Object(o.a)(w,2),O=N[0],j=N[1];(function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getUsers();case 2:r=e.sent,j(null!==(t=null===(a=r.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.users)&&void 0!==t?t:[]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();var x=function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.target.files,r=[],s=0;s<n.length;s++)r.push(Object.assign(n[s],{preview:URL.createObjectURL(n[s])}));c([].concat(Object(f.a)(a),r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{className:"comment-form",onSubmit:y(s)},r.a.createElement("div",{className:"flex flex-row"},r.a.createElement("div",{className:"comment-input"},r.a.createElement(Le.b,{name:"Comments",value:l,"data-cy":"comment-input-".concat(t),inputRef:v({required:!0}),onChange:function(e){return i(e.target.value)},placeholder:p,allowSuggestionsAboveCursor:!0,className:"mentions"},r.a.createElement(Le.a,{trigger:"@",data:O,displayTransform:function(e,t){return"@".concat(t)}})),r.a.createElement("div",{className:"file-input"},r.a.createElement("input",{type:"file",id:"file-".concat(t),className:"file",multiple:!0,onChange:x}),r.a.createElement("label",{htmlFor:"file-".concat(t),className:"file-button-label"},r.a.createElement(b.c,{className:"eos-icons",size:"l"}))),r.a.createElement(h,{className:"btn btn-secondary btn-comment","data-cy":"btn-comment-".concat(t)},u))),g.Comments&&r.a.createElement(ae,{message:"Reply cannot be empty"}),r.a.createElement(Oe,{attachments:a,setAttachments:c}))},Be=function(e,t){t.length&&t.forEach((function(t){e.append("files.attachment",t)}))},De=function(e,t,a){e.find((function(e){return e===a+1}))?t((function(e){return e.filter((function(e){return e!==a+1}))})):t((function(e){return e.concat(a+1)}))},Ve=function(e){var t=e.storyId,a=Object(n.useContext)(G).state,c=localStorage.getItem("id"),s=Object(n.useState)(""),l=Object(o.a)(s,2),u=l[0],p=l[1],f=Object(n.useState)(),E=Object(o.a)(f,2),v=E[0],b=E[1],g=Object(n.useState)(""),y=Object(o.a)(g,2),w=y[0],N=y[1],O=Object(n.useState)([]),j=Object(o.a)(O,2),x=j[0],k=j[1],S=Object(n.useState)(),C=Object(o.a)(S,2),P=C[0],U=C[1],T=Object(n.useState)([]),R=Object(o.a)(T,2),I=R[0],q=R[1],L=Object(n.useState)([]),F=Object(o.a)(L,2),B=F[0],D=F[1],V=Object(n.useState)([]),M=Object(o.a)(V,2),H=M[0],_=M[1],Y=Object(n.useCallback)(Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getComments(t);case 2:a=e.sent,k(a.data.data.userStory.user_story_comments);case 4:case"end":return e.stop()}}),e)}))),[t]);Object(n.useEffect)((function(){Y()}),[Y]),Object(n.useEffect)((function(){return function(){B.forEach((function(e){return URL.revokeObjectURL(e.preview)})),H.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[B,H]);var z=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,a.user=c,a.user_story=t,n.append("data",JSON.stringify(a)),Be(n,B),e.next=7,A.postComment(n);case 7:p(""),D([]),Y();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FormData,t.user=c,t.user_story_comment=v,a.append("data",JSON.stringify(t)),Be(a,H),e.next=7,A.postCommentReply(a);case 7:N(""),_([]),U(null),Y();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"comments-wrapper"},a.auth&&r.a.createElement("div",null,r.a.createElement(Fe,{id:2,attachments:B,setAttachments:D,addComment:z,comment:u,setComment:p,cta:"Leave a Comment",placeholder:"Adding a Comment"})),r.a.createElement("h3",null,"Comments"),x.length?x.map((function(e,t){return r.a.createElement("div",{className:"comment",key:t},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(e.user.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"comment-content","data-cy":"comment-content"},r.a.createElement(i.a,{className:"link link-default","data-cy":"comment-username",to:"/profile/".concat(e.user.id)},e.user.username),r.a.createElement("div",{className:"metadata"},r.a.createElement("div",null,"".concat(e.createdAt.slice(0,10),"  ").concat(e.createdAt.slice(11,19)))),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.Comments}}),r.a.createElement("div",null,!!e.attachment.length&&r.a.createElement("div",{className:"gallery-container-comment"},r.a.createElement(Re,{imageArray:e.attachment}))),r.a.createElement("div",{className:"reply-action"},a.auth&&r.a.createElement(h,{className:"btn btn-transparent btn-reply",onClick:function(){b(e.id),function(e,t,a){t(e===a+1?null:a+1)}(P,U,t),De(I,q,t)}},"Reply"),e.user_story_comment_replies.length>0?r.a.createElement(h,{className:"btn btn-default",onClick:function(){De(I,q,t)}},"View Replies (",e.user_story_comment_replies.length,")"):""),I.find((function(e){return e===t+1}))&&e.user_story_comment_replies.map((function(t,a){return r.a.createElement("div",{className:"comment",key:a},r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(t.user.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"comment-content"},r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(e.user.id)},t.user.username),r.a.createElement("div",{className:"metadata"},r.a.createElement("div",null,"".concat(t.createdAt.slice(0,10),"  ").concat(t.createdAt.slice(11,19)))),r.a.createElement("p",null,t.Comments),0!==t.attachment.length?r.a.createElement("div",{className:"gallery-container"},r.a.createElement(Re,{imageArray:t.attachment})):""))})),P===t+1&&a.auth&&r.a.createElement(Fe,{id:1,attachments:H,setAttachments:_,addComment:K,comment:w,setComment:N,cta:"Add Reply",placeholder:"Adding a Reply"})))})):r.a.createElement("h3",null,"No comments yet"))},Me=function(e){var t=e.storyId,a=localStorage.getItem("id"),c=Object(n.useState)(""),s=Object(o.a)(c,2),l=s[0],u=s[1],f=Object(n.useState)(""),v=Object(o.a)(f,2),w=v[0],N=v[1],O=Object(n.useState)(!1),j=Object(o.a)(O,2),x=j[0],k=j[1],S=Object(n.useState)(!1),C=Object(o.a)(S,2),P=C[0],T=C[1],R=Object(E.usePromiseTracker)().promiseInProgress,I=Object(n.useState)(!1),q=Object(o.a)(I,2),L=q[0],F=q[1],B=function(){F(!L)};Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getStory(t);case 2:a=e.sent,u(a.data.data.userStory);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e()),a&&function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.checkAuthor(a,t);case 2:e.sent.data&&k(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,a]);var V=function(){var e=Object(d.a)(m.a.mark((function e(a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(w.length<=0)){e.next=2;break}return e.abrupt("return");case 2:return a.preventDefault(),n=l.Description+w,r=U(n),e.next=7,A.updateUserStoryDescription(t,r);case 7:T(!1),u(Object(y.a)(Object(y.a)({},l),{},{Description:"".concat(n)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(null===l)return Object(i.c)("/404",{replace:!0}),null;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"EOS User story"),r.a.createElement("meta",{name:"description",content:"Share with us how you use our products, relate to other users stories, vote them up, and we'll make sure we deliver cohesive solutions that enhance your experience."}),r.a.createElement("meta",{name:"keywords",content:"user story, issue tracker"})),r.a.createElement(Z,null),R?r.a.createElement(D,null):l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:0!==l.user_story_comments.length||P?"body-content story-page-second":"body-content story-page"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"story-heading flex flex-row"},r.a.createElement("svg",{className:"story-title-pattern",width:"41",height:"41",viewBox:"0 0 41 41",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{id:"Ellipse 1",cx:"20.5",cy:"20.5",r:"12",fill:"#42779B"})),r.a.createElement("h2",null,l.Title),r.a.createElement("div",{className:"author-information"},r.a.createElement("h4",null,"By:"," ",r.a.createElement(i.a,{className:"link link-default",to:"/profile/".concat(l.author.id)},l.author.username)),r.a.createElement("div",{className:"user-avatar"},r.a.createElement("img",{className:"avatar",src:"https://avatars.dicebear.com/api/jdenticon/".concat(l.author.username,".svg"),alt:"Default User Avatar"})),r.a.createElement("div",{className:"story-buttons-container-top"},x&&!P?r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{className:"btn btn-default","data-cy":"btn-edit",onClick:function(){return T(!0)}},"Edit")):"",r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{className:"share-story",onClick:B},r.a.createElement(b.z,{className:"eos-icons"})),r.a.createElement(h,{className:"share-story",onClick:function(){var e=document.createElement("input"),t=window.location.href;document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)}},r.a.createElement(b.h,{className:"eos-icons"})))))),r.a.createElement("div",{className:"flex flex-row"},P?r.a.createElement("div",{"data-cy":"edit-description",className:"story-editor"},r.a.createElement(ge,{callback:function(e){N(e)}})):r.a.createElement("div",{className:"flex flex-row"},!!l.Attachment.length&&r.a.createElement("div",{className:"gallery-container flex-column"},r.a.createElement(Re,{imageArray:l.Attachment})),r.a.createElement(qe,{maxCharacterLimit:350,txt:l.Description,textLength:l.Description.length})),r.a.createElement("div",{className:"right-nav"},r.a.createElement(Ie,{story:l,currentStatus:l.user_story_status.Status}))),r.a.createElement("div",{className:"story-buttons-container-bottom"},P?r.a.createElement(h,{className:"btn btn-default btn-bottom",onClick:V,"data-cy":"btn-save"},"Save"):"",P?r.a.createElement(h,{className:"btn btn-default btn-bottom",onClick:function(){return T(!1)}},"Cancel"):""),L&&r.a.createElement(g,{content:r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Share"),r.a.createElement(Se.a,{url:window.location,className:"share-button",title:"EOS User Story - POST Stories. GET Features.",hashtags:["EOS","userstory"],onShareWindowClose:B},r.a.createElement(Ce.a,null)),r.a.createElement(Ae.a,{url:window.location,className:"share-button",onShareWindowClose:B},r.a.createElement(Pe.a,null))),handleClose:B,active:L}),r.a.createElement(Ve,{storyId:t})))):"")},He=function(){var e=Object(n.useContext)(G).state,t=Object(n.useState)("My Submissions"),a=Object(o.a)(t,2),c=a[0],s=a[1],l=localStorage.getItem("id");return e.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"My stories | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Z,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper my-stories"},r.a.createElement("h3",null,"My Stories"),r.a.createElement("div",{className:"flex flex-row roadmap-one"},r.a.createElement(h,{className:"My Submissions"===c?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",onClick:function(){return s("My Submissions")}},"My Submissions"),"\xa0 \xa0",r.a.createElement(h,{className:"Following"===c?"btn btn-tabs btn-tabs-selected":"btn btn-tabs",onClick:function(){return s("Following")}},"Following")),r.a.createElement(K,{authorId:"My Submissions"===c?l:null,followerId:"Following"===c?l:null})))):r.a.createElement(ue,{message:"Please login to access your stories"})},_e=a(20),Ye=function(e){var t=e.userId,a=e.show,c=e.setShow,s=e.profilePicURL,l=e.profilePicId,i=Object(n.useState)(null),u=Object(o.a)(i,2),p=u[0],f=u[1],E=Object(n.useState)(null),v=Object(o.a)(E,2),h=v[0],y=v[1],w=Object(n.useState)(!s),j=Object(o.a)(w,2),x=j[0],k=j[1],S=Object(n.useState)(!1),C=Object(o.a)(S,2),A=C[0],P=C[1],U=function(){URL.revokeObjectURL(null===h||void 0===h?void 0:h.preview),y(null),c(!1)},T=function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h||x&&l){e.next=3;break}return U(),e.abrupt("return");case 3:if(!s||!x||h){e.next=15;break}return e.prev=4,P(!0),e.next=8,N.a.delete("".concat(O.b,"/upload/files/").concat(l),{withCredentials:!0});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),f("Unable to update profile picture. Please try again later.");case 13:e.next=35;break;case 15:if((a=new FormData).append("files",h),a.append("ref","user"),a.append("refId",t),a.append("source","users-permissions"),a.append("field","profilePicture"),e.prev=21,P(!0),!s||!x){e.next=28;break}return e.next=26,N.a.all([N.a.delete("".concat(O.b,"/upload/files/").concat(l),{withCredentials:!0}),N.a.post("".concat(O.b,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})]);case 26:e.next=30;break;case 28:return e.next=30,N.a.post("".concat(O.b,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(21),f("Error updating profile picture. Try updating later");case 35:P(!1),c(!1),window.location.reload();case 38:case"end":return e.stop()}}),e,null,[[4,10],[21,32]])})));return function(){return e.apply(this,arguments)}}(),R=Object(Ne.a)({multiple:!1,accept:"image/jpeg, image/png, image/gif",minSize:0,maxSize:153600,onDrop:function(e,t){var a=Object(o.a)(e,1)[0],n=Object(o.a)(t,1)[0];try{y(Object.assign(a,{preview:URL.createObjectURL(a)})),f(null)}catch(c){var r=n.errors.map((function(e){return e.code}));-1!==r.indexOf("file-too-large")&&f("Please upload a file smaller than 150 kB"),-1!==r.indexOf("file-invalid-type")&&f("Please upload a file with .png, .jpg/.jpeg or .gif extensions")}}}),I=R.getRootProps,q=R.getInputProps;return Object(n.useEffect)((function(){return function(){URL.revokeObjectURL(null===h||void 0===h?void 0:h.preview)}}),[h]),A?r.a.createElement(g,{isActive:!0,showButtons:!1},r.a.createElement(D,null)):r.a.createElement(g,{isActive:a,handleClose:function(){return c(!1)},onCancel:U,okText:"Save",onOk:T,showButtons:!0},r.a.createElement("section",{className:"container"},!x&&r.a.createElement("aside",{className:"preview-container"},r.a.createElement("span",{className:"remove-img-icon",onClick:function(){k(!0),y(null)}},r.a.createElement(b.j,{className:"eos-icons"})),r.a.createElement("img",{src:s,className:"user-profile-avatar-img",alt:"preview"})),x&&(h?r.a.createElement("aside",{className:"preview-container"},r.a.createElement("span",{className:"remove-img-icon",onClick:function(){URL.revokeObjectURL(h.preview),y(null)}},r.a.createElement(b.j,{className:"eos-icons"})),r.a.createElement("img",{src:h.preview,className:"user-profile-avatar-img",alt:"preview"})):r.a.createElement("div",I({className:"dropzone"}),r.a.createElement("input",q()),r.a.createElement("p",null,"Drag 'n' drop your image here, or click to select one. For best results upload images with 1:1 aspect ratio. Maximum allowed file-size is 150 kB."))),!!p&&r.a.createElement(ae,{message:p})))},ze=function(e){return r.a.createElement("input",Object.assign({className:"input-default",type:"text"},e))},Ke=function(e){return r.a.createElement("textarea",Object.assign({type:"text"},e,{rows:4,cols:60}))},We=function(e){var t=e.name,a=e.value,c=e.type,s=e.handleInputChange,l=e.updateProfile,i=e.children,u=e.allowEditing,m=Object(v.a)(e,["name","value","type","handleInputChange","updateProfile","children","allowEditing"]),d=Object(n.useState)(!1),p=Object(o.a)(d,2),f=p[0],E=p[1];return r.a.createElement("div",{className:"editable-label"},!f&&r.a.createElement(r.a.Fragment,null,i,u&&r.a.createElement("button",{className:"editable-label-edit-btn",onClick:function(){return E(!f)}},r.a.createElement(b.s,{className:"eos-icons"}))),f&&r.a.createElement(r.a.Fragment,null,function(e){switch(e){case"text":return r.a.createElement(ze,Object.assign({onChange:s,defaultValue:a,onKeyPress:function(e){s(e),"Enter"===e.key&&(l(),E(!f))},name:t},m));case"textArea":return r.a.createElement(Ke,Object.assign({onChange:s,defaultValue:a,onKeyPress:s,name:t},m));default:return"No component was found"}}(c),r.a.createElement("button",{onClick:function(){E(!f),l()}},r.a.createElement(b.v,{className:"eos-icons"}))))},Qe=function(e){var t=e.allowEditing,a=e.showModal;return t?r.a.createElement("div",{className:"user-profile-edit-badge",onClick:a},"Edit ",r.a.createElement(b.s,{className:"eos-icons",color:"white"})):null},Ge=function(e){var t,a,c,s,l,i,u=e.user,m=e.allowEditing,d=Object(n.useState)(!1),p=Object(o.a)(d,2),f=p[0],E=p[1];return r.a.createElement("div",{className:"user-profile-avatar"},r.a.createElement(Qe,{allowEditing:m,showModal:function(){return E(!0)}}),u?r.a.createElement("img",{className:"user-profile-avatar-img",src:null!==(t=null===u||void 0===u||null===(a=u.profilePicture)||void 0===a?void 0:a.url)&&void 0!==t?t:"https://avatars.dicebear.com/api/jdenticon/".concat(u.username,".svg"),alt:"User avatar"}):r.a.createElement(I.a,{circle:!0,width:150,height:150}),f&&r.a.createElement(Ye,{userId:u.id,show:f,setShow:E,profilePicURL:null!==(c=null===u||void 0===u||null===(s=u.profilePicture)||void 0===s?void 0:s.url)&&void 0!==c?c:null,profilePicId:null!==(l=null===u||void 0===u||null===(i=u.profilePicture)||void 0===i?void 0:i.id)&&void 0!==l?l:null}))},Je=function(e){var t=e.user;return r.a.createElement("div",{className:"user-profile-settings"},t?r.a.createElement("ul",null,r.a.createElement("li",null,"Email address:",r.a.createElement("span",null,null===t||void 0===t?void 0:t.email)),r.a.createElement("li",null,"Username:",r.a.createElement("span",null,null===t||void 0===t?void 0:t.username)),r.a.createElement("li",null,r.a.createElement("a",{className:"link link-default",href:"/changePassword"},"Change password"))):r.a.createElement(I.a,{width:200}))},Xe=function(e){var t,a=e.user,n=e.handleInputChange,c=e.allowEditing,s=e.updateProfile;return r.a.createElement("div",{className:"user-profile-details"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(We,{type:"text",name:"Name",value:null!==(t=a.Name)&&void 0!==t?t:a.username,className:"input-default",handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your name"},r.a.createElement("h2",{className:"user-profile-name"},a.Name?a.Name:a.username)),r.a.createElement(We,{type:"textArea",name:"Bio",value:a.Bio,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Say something about yourself"},r.a.createElement("p",null,a.Bio||(c?"Say something about yourself":"Hi There!")))):r.a.createElement(I.a,{count:2}),r.a.createElement("div",{className:"user-profile-extra"},a?r.a.createElement("ul",null,c||a.Profession?r.a.createElement("li",null,"Profession",r.a.createElement(We,{type:"text",name:"Profession",value:a.Profession,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your job title"},r.a.createElement("span",null,a.Profession?a.Profession:"Your job title"))):null,c||a.Company?r.a.createElement("li",null,"Company",r.a.createElement(We,{type:"text",name:"Company",value:a.Company,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your company name"},r.a.createElement("span",null,a.Company?a.Company:"Your company name"))):null,c||a.LinkedIn?r.a.createElement("li",null,"LinkedIn",r.a.createElement(We,{type:"text",name:"LinkedIn",value:a.LinkedIn,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your LinkedIn username"},r.a.createElement("span",null,a.LinkedIn?r.a.createElement("a",{className:"link link-default",href:"https://www.linkedin.com/in/".concat(null===a||void 0===a?void 0:a.LinkedIn),target:"_blank",rel:"noopener noreferrer"},a.LinkedIn):"Your LinkedIn username"))):null,c||a.Twitter?r.a.createElement("li",null,"Twitter",r.a.createElement(We,{type:"text",name:"Twitter",value:a.Twitter,handleInputChange:n,allowEditing:c,updateProfile:s,placeholder:"Your Twitter handle"},r.a.createElement("span",null,a.Twitter?r.a.createElement("a",{className:"link link-default",href:"https://twitter.com/".concat(null===a||void 0===a?void 0:a.Twitter),target:"_blank",rel:"noopener noreferrer"},a.Twitter?"@".concat(a.Twitter):""):"Your Twitter handle"))):null):r.a.createElement(I.a,{height:70})))},Ze=function(e){var t=e.allowEditing,a=e.user,n=e.handleInputChange,c=e.updateProfile;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"user-profile margin-top-xxl margin-bottom-m"},r.a.createElement(Ge,{user:a,allowEditing:t}),r.a.createElement(Xe,{user:a,handleInputChange:n,updateProfile:c,allowEditing:t})),t&&r.a.createElement(Je,{user:a}))},$e=function(){var e=localStorage.getItem("id"),t=Object(n.useContext)(G).state,a=Object(n.useState)(""),c=Object(o.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(!1),u=Object(o.a)(i,2)[1],f=function(){var t=Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.updateUser(Object(y.a)({id:e},s));case 2:t.sent&&u(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){e&&function(){var t=Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.getUserDetails(e);case 2:a=t.sent,l(a.data.data.user);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]),t.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"My profile | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Z,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"flex flex-row user-profile-wrapper"},r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(Ze,{user:""===s?"":Object.assign(s,{id:e}),handleInputChange:function(e){l(Object(y.a)(Object(y.a)({},s),{},Object(_e.a)({},e.target.name,e.target.value)))},updateProfile:f,allowEditing:!0})))))):r.a.createElement(ue,{message:"Please login to access your profile"})},et=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"404 Not Found | EOS User story")),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper pg-404"},r.a.createElement("svg",{className:"svg-right flex flex-column",width:"121",height:"240",viewBox:"0 0 121 240",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"g-right"},r.a.createElement("path",{id:"r-4",d:"M120 240H75C66.72 240 60 233.28 60 225V180H105C113.28 180 120 186.72 120 195V240Z",fill:"#0AA5A5"}),r.a.createElement("path",{id:"r-2",d:"M61 120H106C114.28 120 121 113.28 121 105V60H76C67.72 60 61 66.72 61 75V120Z",fill:"#0AA5A5"}),r.a.createElement("path",{id:"r-3",d:"M0 180H45C53.28 180 60 173.28 60 165V120H15C6.72 120 0 126.72 0 135V180Z",fill:"#00CCD1"}),r.a.createElement("path",{id:"r-1",d:"M60 60H15C6.72 60 0 53.28 0 45V0H45C53.28 0 60 6.72 60 15V60Z",fill:"#00CCD1"}))),r.a.createElement("h1",{className:"heading-404"},"404"),r.a.createElement("hr",{className:"hr-404"}),r.a.createElement("p",{className:"p-404"},"The page you are looking for could not be found."),r.a.createElement(h,{className:"btn btn-default btn-404",onClick:function(){return Object(i.c)("/")}},"Back to Home"),r.a.createElement("svg",{className:"svg-left flex flex-column",width:"121",height:"240",viewBox:"0 0 121 240",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{id:"g-left"},r.a.createElement("path",{id:"l-4",d:"M120 240H75C66.72 240 60 233.28 60 225V180H105C113.28 180 120 186.72 120 195V240Z",fill:"#1A2A3A"}),r.a.createElement("path",{id:"l-2",d:"M61 120H106C114.28 120 121 113.28 121 105V60H76C67.72 60 61 66.72 61 75V120Z",fill:"#1A2A3A"}),r.a.createElement("path",{id:"l-3",d:"M0 180H45C53.28 180 60 173.28 60 165V120H15C6.72 120 0 126.72 0 135V180Z",fill:"#00CCD1"}),r.a.createElement("path",{id:"l-1",d:"M60 60H15C6.72 60 0 53.28 0 45V0H45C53.28 0 60 6.72 60 15V60Z",fill:"#00CCD1"}))))))},tt=function(e){var t=e.profileId,a=Object(n.useState)(""),c=Object(o.a)(a,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){t&&function(){var e=Object(d.a)(m.a.mark((function e(){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getUserDetails(t);case 2:a=e.sent,l(a.data.data.user);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),null===s?(Object(i.c)("/404",{replace:!0}),null):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"".concat(s.username," | EOS User story")),r.a.createElement("meta",{name:"description",content:"".concat(s.Bio)}),r.a.createElement("meta",{name:"keywords",content:"user story, issue tracker"})),r.a.createElement(Z,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("div",{className:"flex flex-row flex-space-around"},r.a.createElement("div",{className:"flex flex-column"},r.a.createElement(Ze,{user:s}))),r.a.createElement("div",{className:"flex flex-column"},r.a.createElement("h3",null,"Stories by this user"),r.a.createElement(K,{authorId:t})))))},at=function(){var e=Object(te.a)().t,t=Object(n.useContext)(G),a=t.state,c=t.dispatch,s=J(),l=s.changePassword,u=s.logout,f=Object(ee.a)(),E=f.register,v=f.handleSubmit,b=f.errors,g=Object(n.useState)(""),w=Object(o.a)(g,2),N=w[0],O=w[1],j=function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(Object(y.a)(Object(y.a)({},t),{},{id:localStorage.getItem("id")}));case 3:a=e.sent,O(a),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:c({type:"DEAUTHENTICATE"}),Object(i.c)("/login");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Change your password | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(ie,null,r.a.createElement(le,null),r.a.createElement(oe,null,r.a.createElement("div",null,N?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},e("authentication:success")),r.a.createElement("p",null,"Your password has been reset."),r.a.createElement("div",{className:"flex flex-row flex-space-between"},r.a.createElement("span",{className:"link link-default",onClick:x},e("authentication:reset-password-done")))):r.a.createElement(r.a.Fragment,null,a.errorCode&&r.a.createElement(ae,{status:a.errorCode}),r.a.createElement("form",{className:"form-default",onSubmit:v(j)},r.a.createElement("div",{className:"header"},e("authentication:reset-password")),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},e("authentication:old-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"oldPassword",ref:E({required:!0})}),b.oldPassword&&r.a.createElement(ae,{type:b.oldPassword.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"password"},e("authentication:new-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"password",ref:E({required:!0})}),b.password&&r.a.createElement(ae,{type:b.password.type})),r.a.createElement("div",{className:"form-element"},r.a.createElement("label",{htmlFor:"confirm-password"},e("authentication:confirm-password")),r.a.createElement("input",{className:"input-default",type:"password",name:"passwordConfirmation",ref:E({required:!0})}),b.passwordConfirmation&&r.a.createElement(ae,{type:b.passwordConfirmation.type})),r.a.createElement(h,{type:"submit",className:"btn btn-default"},e("authentication:submit-label")))))))):r.a.createElement(ue,{message:"Please login to access your profile"})},nt=a(112),rt=a.n(nt),ct=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(E.usePromiseTracker)().promiseInProgress;return Object(n.useEffect)((function(){var e=function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getPolicies();case 2:a=e.sent,c(null===(t=a.data.data.userStoryPolicies)||void 0===t?void 0:t[0].Description);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(E.trackPromise)(e())}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Cookie & Privacy Policies | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Z,null),r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},s?r.a.createElement(D,null):a?r.a.createElement(rt.a,null,a&&"".concat(a)):r.a.createElement("h3",null,"No policies"))))},st=function(){var e=localStorage.getItem("id"),t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],s=a[1],l=Object(E.usePromiseTracker)().promiseInProgress;return Object(n.useEffect)((function(){var t=function(){var t=Object(d.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.getNotificationsByUserId(e);case 2:a=t.sent,s(a.data.data.userStoryNotifications);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(E.trackPromise)(t())}),[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement("title",null,"Notifications | EOS User story"),r.a.createElement("meta",{name:"robots",content:"noindex"})),r.a.createElement(Z,null),l?r.a.createElement(D,null):r.a.createElement("div",{className:"body-content"},r.a.createElement("div",{className:"body-wrapper"},r.a.createElement("h3",null,"Notifications"),r.a.createElement("div",{className:"flex flex-column"},c.length>0?c.map((function(e,t){return r.a.createElement("div",{className:"notification",key:t,onClick:function(){return Object(i.c)("/".concat(e.link))}},r.a.createElement("div",{className:"notification-text"},e.message),r.a.createElement("div",{className:"notification-text"},"".concat(e.date.slice(0,10),"  ").concat(e.date.slice(11,19))))})):r.a.createElement("div",{className:"notification"},r.a.createElement("div",{className:"notification-text"},"No notifications at the moment"))))))},lt=function(e,t){switch(t.type){case"AUTHENTICATE":return Object(y.a)(Object(y.a)({},e),{},{auth:!0});case"DEAUTHENTICATE":return Object(y.a)(Object(y.a)({},e),{},{auth:!1});case"ERROR":return Object(y.a)(Object(y.a)({},e),{},{errorCode:t.payload});default:return e}},ot=function(){return r.a.createElement("div",{className:"footer-main"},r.a.createElement("a",{className:"link link-default",href:"/policies"},"Cookies and Privacy policy"),r.a.createElement("p",null,"We only use strictly necessary cookies"))},it={auth:!1,errorCode:null},ut=function(){var e=Object(n.useReducer)(lt,it),t=Object(o.a)(e,2),a=t[0],c=t[1],s=localStorage.getItem("id");return Object(n.useEffect)((function(){window.addEventListener("storage",(function(e){localStorage.getItem("id")?c({type:"AUTHENTICATE"}):c({type:"DEAUTHENTICATE"})}))}),[]),Object(n.useEffect)((function(){c(s?{type:"AUTHENTICATE"}:{type:"DEAUTHENTICATE"})}),[s]),r.a.createElement(G.Provider,{value:{state:a,dispatch:c}},r.a.createElement(i.b,null,r.a.createElement($,{path:"/"}),r.a.createElement(me,{path:"/register"}),r.a.createElement(ue,{path:"/login"}),r.a.createElement(de,{path:"/forgotPassword"}),r.a.createElement(pe,{path:"/resetPassword"}),r.a.createElement(ke,{path:"/newStory"}),r.a.createElement(Me,{path:"/story/:storyId"}),r.a.createElement(He,{path:"/myStories"}),r.a.createElement($e,{path:"/myProfile"}),r.a.createElement(tt,{path:"/profile/:profileId"}),r.a.createElement(st,{path:"/notifications"}),r.a.createElement(at,{path:"/changePassword"}),r.a.createElement(ct,{path:"/policies"}),r.a.createElement(et,{default:!0})),r.a.createElement(ot,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var mt=a(65),dt=a(35),pt=a(113),ft={en:a(114),es:pt};mt.a.use(dt.e).init({resources:ft,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});mt.a;s.a.render(r.a.createElement(l.a,null,r.a.createElement(ut,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[117,1,2]]]);
//# sourceMappingURL=main.2ad2dff3.chunk.js.map